<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc/TlmChan/docs/sdd.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_svc_2_tlm_chan_2docs_2sdd_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Svc/TlmChan/docs/sdd.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_svc_2_tlm_chan_2docs_2sdd_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;\page SvcTlmChanComponent Svc::TlmChan Component</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;# Svc::TlmChan Component</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;## 1. Introduction</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;The `Svc::TlmChan` Component is used to store telemetry values written by other components. The values are stored in serialized form. </div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;The data is stored as a set of telemetry channels in a table. </div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;The data can be individually read back or periodically pushed to another component for transporting out of the system. </div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;`Svc::TlmChan` is a implementation of the `Svc::TlmStore` component in the `Svc/Tlm` directory.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;## 2. Requirements</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;The requirements for `Svc::TlmChan` are as follows:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Requirement | Description | Verification Method</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;----------- | ----------- | -------------------</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;TLC-001 | The `Svc::TlmChan` component shall provide an interface to submit telmetry | Unit Test</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;TLC-002 | The `Svc::TlmChan` component shall provide an interface to read telmetry | Unit Test</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;TLC-003 | The `Svc::TlmChan` component shall provide an interface to run periodically to write telemetry | Unit Test</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;TLC-004 | The `Svc::TlmChan` component shall write changed telemetry channels when invoked by the run port | Unit Test</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;## 3. Design</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;### 3.1 Context</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;#### 3.1.1 Component Diagram</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;The `Svc::TlmChan` component has the following component diagram:</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;![Svc::TlmChan Diagram](img/TlmChanBDD.jpg &quot;Svc::TlmChan&quot;)</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;#### 3.1.2 Ports</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;The `Svc::TlmChan` component uses the following port types:</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;Port Data Type | Name | Direction | Kind | Usage</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;-------------- | ---- | --------- | ---- | -----</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;[`Svc::Sched`](../../Sched/docs/sdd.html) | Run | Input | Asynchronous | Execute a cycle to write changed telemetry channels</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;[`Fw::Tlm`](../../../Fw/Tlm/docs/sdd.html) | TlmRecv | Input | Synchronous Input | Update a telemetry channel</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;[`Fw::Tlm`](../../../Fw/Tlm/docs/sdd.html) | TlmGet | Input | Synchronous Input | Read a telemetry channel</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;[`Fw::Com`](../../../Fw/Com/docs/sdd.html) | PktSend | Output | n/a | Write a set of packets with updated telemetry</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;#### 3.2 Functional Description</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;The `Svc::TlmChan` component has an input port `TlmRecv` that receives channel updates from other components in the system. These calls from the other components are made by the component implementation classes, but the generated code in the base classes takes the type specific channel value and serializes it, then makes the call to the output port. The `Svc::TlmChan` component can then store the channel value as generic data. The channel values are stored in an internal double-buffered table, and a flag is set when a new value is written to the channel entry.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;When a request is made for a non-existent channel, the call will return with an empty buffer in the Fw::TlmBuffer value argument. This is to cover the case where a channel is defined in the system, but has not been written yet. If the channel has not ever been defined, there is no way to programmatically determine that from the TlmGet port call. </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;The implementation uses a hashing function that is tuned in the configuration file `TlmChanImplCfg.hpp`. See section 3.5 for description.</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;### 3.3 Scenarios</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;#### 3.3.1 External User Option</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;This diagram shows the scenario where telemetry packets are generated for an external user:</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;![External User Scenario](img/ExternalUserScenario.jpg) </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;#### 3.3.2 Telemetry Database Option</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;This diagram shows the scenario where telemetry packets are stored an retrieved as a database:</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;![External User Scenario](img/DatabaseScenario.jpg) </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;### 3.4 State</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;`Svc::TlmChan` has no state machines.</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;### 3.5 Algorithms</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;In order to speed up lookups for storing and reading telemetry channels, a simple hash function is used to select a location in an array of hash table slots.</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;A configuration value in `TlmChanImplCfg.h` defines a set of hash buckets to store the telemetry values. The number of buckets has to be at least as large as the number of telemetry values defined in the system. The number of channels in the system can be determined by invoking `make comp_report_gen` from the deployment directory. The number of has table slots `TLMCHAN_NUM_TLM_HASH_SLOTS` and the hash value `TLMCHAN_HASH_MOD_VALUE` in the configuration file can be varied to balance the amount of memory for slots versus the distribution of buckets to slots. See `TlmChanImplCfg.h` for a procedure on how to tune the algorithm.</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;## 4. Dictionaries</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;Dictionaries: [HTML](TlmChan.html) [MD](TlmChan.md)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;## 5. Module Checklists</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;Document | Link</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;-------- | ----</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;Design Checklist | [Link](Checklist_Design.xlsx)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;Code Checklist  | [Link](Checklist_Code.xlsx)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;Unit Test Checklist  | [Link](Checklist_Unit_Test.xlsx)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;## 6. Unit Testing</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;File | Contents</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;---- | --------</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;Unit Test Output | [Link](../test/ut/output/test.txt)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;Coverage - TlmChanImpl.cpp | [Link](../test/ut/output/TlmChanImpl.cpp.gcov)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;Coverage - TlmChanImplGet.cpp | [Link](../test/ut/output/TlmChanImplGet.cpp.gcov)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;Coverage - TlmChanImplRecv.cpp | [Link](../test/ut/output/TlmChanImplRecv.cpp.gcov)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;Coverage - TlmChanImplTask.cpp | [Link](../test/ut/output/TlmChanImplTask.cpp.gcov)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;Coverage - TlmChanComponentAc.cpp | [Link](../test/ut/output/TlmChanComponentAc.cpp.gcov)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;## 7. Change Log</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;Date | Description</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;---- | -----------</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;6/23/2015 | Design review edits</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;7/22/2015 | Design review actions </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;9/28/2015 | Unit Test Review additions</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_svc_2_tlm_chan_2docs_2sdd_8md.html">sdd.md</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

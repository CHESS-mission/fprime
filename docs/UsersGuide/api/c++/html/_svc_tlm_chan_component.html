<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::TlmChan Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_svc_tlm_chan_component.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Svc::TlmChan Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md467"></a>
Svc::TlmChan Component</h1>
<h2><a class="anchor" id="autotoc_md468"></a>
1. Introduction</h2>
<p>The <code>Svc::TlmChan</code> Component is used to store telemetry values written by other components. The values are stored in serialized form. The data is stored as a set of telemetry channels in a table. The data can be individually read back or periodically pushed to another component for transporting out of the system. <code>Svc::TlmChan</code> is a implementation of the <code>Svc::TlmStore</code> component in the <code>Svc/Tlm</code> directory.</p>
<h2><a class="anchor" id="autotoc_md469"></a>
2. Requirements</h2>
<p>The requirements for <code>Svc::TlmChan</code> are as follows:</p>
<table class="doxtable">
<tr>
<th>Requirement </th><th>Description </th><th>Verification Method  </th></tr>
<tr>
<td>TLC-001 </td><td>The <code>Svc::TlmChan</code> component shall provide an interface to submit telmetry </td><td>Unit <a class="el" href="namespace_test.html">Test</a> </td></tr>
<tr>
<td>TLC-002 </td><td>The <code>Svc::TlmChan</code> component shall provide an interface to read telmetry </td><td>Unit <a class="el" href="namespace_test.html">Test</a> </td></tr>
<tr>
<td>TLC-003 </td><td>The <code>Svc::TlmChan</code> component shall provide an interface to run periodically to write telemetry </td><td>Unit <a class="el" href="namespace_test.html">Test</a> </td></tr>
<tr>
<td>TLC-004 </td><td>The <code>Svc::TlmChan</code> component shall write changed telemetry channels when invoked by the run port </td><td>Unit <a class="el" href="namespace_test.html">Test</a> </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md470"></a>
3. Design</h2>
<h3><a class="anchor" id="autotoc_md471"></a>
3.1 Context</h3>
<h4><a class="anchor" id="autotoc_md472"></a>
3.1.1 Component Diagram</h4>
<p>The <code>Svc::TlmChan</code> component has the following component diagram:</p>
<div class="image">
<img src="img/TlmChanBDD.jpg" alt="Svc::TlmChan Diagram" title="Svc::TlmChan"/>
</div>
<h4><a class="anchor" id="autotoc_md473"></a>
3.1.2 Ports</h4>
<p>The <code>Svc::TlmChan</code> component uses the following port types:</p>
<table class="doxtable">
<tr>
<th>Port Data Type </th><th>Name </th><th>Direction </th><th>Kind </th><th>Usage  </th></tr>
<tr>
<td><a href="../../Sched/docs/sdd.html"><code>Svc::Sched</code></a> </td><td>Run </td><td>Input </td><td>Asynchronous </td><td>Execute a cycle to write changed telemetry channels </td></tr>
<tr>
<td><a href="../../../Fw/Tlm/docs/sdd.html"><code>Fw::Tlm</code></a> </td><td>TlmRecv </td><td>Input </td><td>Synchronous Input </td><td>Update a telemetry channel </td></tr>
<tr>
<td><a href="../../../Fw/Tlm/docs/sdd.html"><code>Fw::Tlm</code></a> </td><td>TlmGet </td><td>Input </td><td>Synchronous Input </td><td>Read a telemetry channel </td></tr>
<tr>
<td><a href="../../../Fw/Com/docs/sdd.html"><code>Fw::Com</code></a> </td><td>PktSend </td><td>Output </td><td>n/a </td><td>Write a set of packets with updated telemetry </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md474"></a>
3.2 Functional Description</h4>
<p>The <code>Svc::TlmChan</code> component has an input port <code>TlmRecv</code> that receives channel updates from other components in the system. These calls from the other components are made by the component implementation classes, but the generated code in the base classes takes the type specific channel value and serializes it, then makes the call to the output port. The <code>Svc::TlmChan</code> component can then store the channel value as generic data. The channel values are stored in an internal double-buffered table, and a flag is set when a new value is written to the channel entry.</p>
<p>When a request is made for a non-existent channel, the call will return with an empty buffer in the <a class="el" href="class_fw_1_1_tlm_buffer.html">Fw::TlmBuffer</a> value argument. This is to cover the case where a channel is defined in the system, but has not been written yet. If the channel has not ever been defined, there is no way to programmatically determine that from the TlmGet port call.</p>
<p>The implementation uses a hashing function that is tuned in the configuration file <code><a class="el" href="_tlm_chan_impl_cfg_8hpp.html" title="Configuration file for Telemetry Channel component. ">TlmChanImplCfg.hpp</a></code>. See section 3.5 for description.</p>
<h3><a class="anchor" id="autotoc_md475"></a>
3.3 Scenarios</h3>
<h4><a class="anchor" id="autotoc_md476"></a>
3.3.1 External User Option</h4>
<p>This diagram shows the scenario where telemetry packets are generated for an external user:</p>
<div class="image">
<img src="img/ExternalUserScenario.jpg" alt="External User Scenario"/>
</div>
<h4><a class="anchor" id="autotoc_md477"></a>
3.3.2 Telemetry Database Option</h4>
<p>This diagram shows the scenario where telemetry packets are stored an retrieved as a database:</p>
<div class="image">
<img src="img/DatabaseScenario.jpg" alt="External User Scenario"/>
</div>
<h3><a class="anchor" id="autotoc_md478"></a>
3.4 State</h3>
<p><code>Svc::TlmChan</code> has no state machines.</p>
<h3><a class="anchor" id="autotoc_md479"></a>
3.5 Algorithms</h3>
<p>In order to speed up lookups for storing and reading telemetry channels, a simple hash function is used to select a location in an array of hash table slots. A configuration value in <code>TlmChanImplCfg.h</code> defines a set of hash buckets to store the telemetry values. The number of buckets has to be at least as large as the number of telemetry values defined in the system. The number of channels in the system can be determined by invoking <code>make comp_report_gen</code> from the deployment directory. The number of has table slots <code>TLMCHAN_NUM_TLM_HASH_SLOTS</code> and the hash value <code>TLMCHAN_HASH_MOD_VALUE</code> in the configuration file can be varied to balance the amount of memory for slots versus the distribution of buckets to slots. See <code>TlmChanImplCfg.h</code> for a procedure on how to tune the algorithm.</p>
<h2><a class="anchor" id="autotoc_md480"></a>
4. Dictionaries</h2>
<p>Dictionaries: <a href="TlmChan.html">HTML</a> MD</p>
<h2><a class="anchor" id="autotoc_md481"></a>
5. Module Checklists</h2>
<table class="doxtable">
<tr>
<th>Document </th><th>Link  </th></tr>
<tr>
<td>Design Checklist </td><td><a href="Checklist_Design.xlsx">Link</a> </td></tr>
<tr>
<td>Code Checklist </td><td><a href="Checklist_Code.xlsx">Link</a> </td></tr>
<tr>
<td>Unit <a class="el" href="namespace_test.html">Test</a> Checklist </td><td><a href="Checklist_Unit_Test.xlsx">Link</a> </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md482"></a>
6. Unit Testing</h2>
<table class="doxtable">
<tr>
<th>File </th><th>Contents  </th></tr>
<tr>
<td>Unit <a class="el" href="namespace_test.html">Test</a> Output </td><td><a href="../test/ut/output/test.txt">Link</a> </td></tr>
<tr>
<td>Coverage - <a class="el" href="_tlm_chan_impl_8cpp.html" title="Implementation file for channelized telemetry storage component. ">TlmChanImpl.cpp</a> </td><td><a href="../test/ut/output/TlmChanImpl.cpp.gcov">Link</a> </td></tr>
<tr>
<td>Coverage - <a class="el" href="_tlm_chan_impl_get_8cpp.html">TlmChanImplGet.cpp</a> </td><td><a href="../test/ut/output/TlmChanImplGet.cpp.gcov">Link</a> </td></tr>
<tr>
<td>Coverage - <a class="el" href="_tlm_chan_impl_recv_8cpp.html">TlmChanImplRecv.cpp</a> </td><td><a href="../test/ut/output/TlmChanImplRecv.cpp.gcov">Link</a> </td></tr>
<tr>
<td>Coverage - <a class="el" href="_tlm_chan_impl_task_8cpp.html" title="Implementation for telemetry channel component thread. ">TlmChanImplTask.cpp</a> </td><td><a href="../test/ut/output/TlmChanImplTask.cpp.gcov">Link</a> </td></tr>
<tr>
<td>Coverage - <a class="el" href="_tlm_chan_component_ac_8cpp.html">TlmChanComponentAc.cpp</a> </td><td><a href="../test/ut/output/TlmChanComponentAc.cpp.gcov">Link</a> </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md483"></a>
7. Change Log</h2>
<table class="doxtable">
<tr>
<th>Date </th><th>Description  </th></tr>
<tr>
<td>6/23/2015 </td><td>Design review edits </td></tr>
<tr>
<td>7/22/2015 </td><td>Design review actions </td></tr>
<tr>
<td>9/28/2015 </td><td>Unit <a class="el" href="namespace_test.html">Test</a> Review additions </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_svc.html">Svc Compontents Ports and Classes</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
